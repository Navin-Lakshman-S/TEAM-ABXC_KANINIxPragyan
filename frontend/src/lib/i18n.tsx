"use client";

import React, { createContext, useContext, useState, useCallback, ReactNode } from "react";

export type Lang = "en" | "es" | "hi" | "ta";

export const LANGUAGES: { code: Lang; label: string; native: string }[] = [
  { code: "en", label: "English", native: "English" },
  { code: "es", label: "Spanish", native: "Español" },
  { code: "hi", label: "Hindi", native: "हिन्दी" },
  { code: "ta", label: "Tamil", native: "தமிழ்" },
];

/* ─────────── Translation dictionary ─────────── */
const translations: Record<Lang, Record<string, string>> = {
  en: {
    // Sidebar
    "nav.triage": "New Triage",
    "nav.dashboard": "Dashboard",
    "nav.patients": "Patients",
    "nav.resources": "Resources",
    "nav.wearable": "Wearable",
    "nav.fairness": "Bias & Fairness",
    "nav.manage": "Manage",
    "nav.language": "Language",
    "sidebar.brand": "Smart Patient Triage",
    "sidebar.engine": "AI Engine",
    "sidebar.engineDesc": "XGBoost Classifier · SHAP Explainer · Digital Twin Sim",

    // Dashboard
    "dash.title": "Triage Dashboard",
    "dash.subtitle": "Real-time overview of patient triage and hospital resources",
    "dash.refresh": "Refresh",
    "dash.totalPatients": "Total Patients",
    "dash.criticalAlerts": "Critical Alerts",
    "dash.avgConfidence": "Avg Confidence",
    "dash.deptsActive": "Depts Active",
    "dash.riskDist": "Risk Distribution",
    "dash.deptChart": "Patients by Department",
    "dash.activity": "24-Hour Triage Activity",
    "dash.vitals": "Avg Patient Vitals Trend",
    "dash.aiModel": "AI Model Performance",
    "dash.xgb": "XGBoost Classification Metrics",
    "dash.prodReady": "Production Ready",
    "dash.accuracy": "Overall Accuracy",
    "dash.features": "Input Features",
    "dash.trainSamples": "Training Samples",
    "dash.testSamples": "Test Samples",
    "dash.confMatrix": "Confusion Matrix",
    "dash.recentTriage": "Recent Triage Results",
    "dash.noPatients": "No patients triaged yet.",
    "dash.goTriage": "New Triage",

    // Triage
    "triage.title": "New Patient Triage",
    "triage.subtitle": "Enter patient vitals and symptoms for AI-powered risk assessment",
    "triage.patientDetails": "Patient Details",
    "triage.fullName": "Full Name",
    "triage.age": "Age",
    "triage.gender": "Gender",
    "triage.vitals": "Vital Signs",
    "triage.symptoms": "Symptoms",
    "triage.voice": "Voice",
    "triage.listening": "Listening...",
    "triage.searchSymptoms": "Search symptoms...",
    "triage.conditions": "Pre-existing Conditions",
    "triage.searchConditions": "Search conditions...",
    "triage.insurance": "Insurance",
    "triage.provider": "Provider",
    "triage.responseHours": "Expected Response (hours)",
    "triage.submit": "Run AI Triage",
    "triage.running": "Running Triage...",
    "triage.uploadEHR": "Upload EHR",
    "triage.uploadDesc": "Upload a PDF or text file from an existing EHR to auto-fill the form.",
    "triage.parseDoc": "Parse Document",
    "triage.presets": "Quick Presets",
    "triage.presetsDesc": "Load a demo scenario to test the engine.",
    "triage.result": "Triage Result",
    "triage.print": "Print",
    "triage.export": "Export JSON",
    "triage.riskLevel": "Risk Level",
    "triage.confidence": "Confidence",
    "triage.department": "Department",
    "triage.detScore": "Deterioration Score",
    "triage.shapTitle": "AI Explainability — SHAP Factor Analysis",
    "triage.twinTitle": "Digital Twin — Projected Trajectory",
    "triage.detAlerts": "Deterioration Alerts",
    "triage.insRisk": "Insurance Wait-Time Risk",
    "triage.resStatus": "Hospital Resource Status",
    "triage.dataWarnings": "Data Quality Warnings",

    // Patients
    "patients.title": "Patient Records",
    "patients.search": "Search by name, ID, or department...",
    "patients.noMatch": "No patients match your search.",
    "patients.noTriaged": "No patients triaged yet.",

    // Resources
    "resources.title": "Hospital Resources",
    "resources.subtitle": "Real-time bed, equipment, and staff availability",
    "resources.beds": "Beds",
    "resources.ventilators": "Ventilators",
    "resources.monitors": "Monitors",
    "resources.staff": "Staff on duty",

    // Wearable
    "wearable.title": "Wearable Vitals Monitor",
    "wearable.subtitle": "Simulated smartwatch stream — real-time heart rate and SpO2 via WebSocket",
    "wearable.config": "Stream Configuration",
    "wearable.start": "Start Stream",
    "wearable.stop": "Stop Stream",
    "wearable.howItWorks": "How It Works",

    // Fairness
    "fairness.title": "Bias & Fairness Analysis",
    "fairness.subtitle": "Demographic parity, disparate impact, and equalized odds across patient groups",
    "fairness.pass": "Model Passes All Fairness Checks",
    "fairness.fail": "Potential Bias Detected",

    // Drift / Model Health
    "nav.drift": "Model Health",
    "drift.title": "ML Model Health",
    "drift.subtitle": "Monitor data drift, model performance, and retraining recommendations",
    "drift.refresh": "Refresh",
    "drift.retrain": "Retrain Model",
    "drift.driftDetected": "Data Drift Detected",
    "drift.modelHealthy": "Model is Healthy",
    "drift.overallDrift": "Overall Drift",
    "drift.featuresDrifted": "Features Drifted",
    "drift.patientsAnalyzed": "Patients Analyzed",
    "drift.modelVersion": "Model Version",
    "drift.accuracy": "Accuracy",
    "drift.f1Score": "F1 Score",
    "drift.aucRoc": "AUC-ROC",
    "drift.featureDriftChart": "Feature Drift (KS Statistics)",
    "drift.ksStatDesc": "Kolmogorov-Smirnov test comparing training vs current feature distributions",
    "drift.driftRadar": "Drift Radar Overview",
    "drift.radarDesc": "Multi-dimensional view of feature-level drift intensity",
    "drift.labelDistribution": "Label Distribution Shift",
    "drift.featureDetails": "Feature Drift Details",
    "drift.feature": "Feature",
    "drift.ksStat": "KS Stat",
    "drift.pValue": "P-Value",
    "drift.meanShift": "Mean Shift",
    "drift.status": "Status",
    "drift.modelTrainingInfo": "Model Training Info",
    "drift.modelName": "Model Name",
    "drift.trainingDate": "Training Date",
    "drift.trainingSamples": "Training Samples",
    "drift.lastRetrain": "Last Retrain",

    // Common
    "common.risk": "Risk",
    "common.high": "High",
    "common.medium": "Medium",
    "common.low": "Low",
    "common.patient": "Patient",
    "common.time": "Time",
    "common.loading": "Loading...",
    "common.language": "Language",
  },

  es: {
    "nav.triage": "Nuevo Triaje",
    "nav.dashboard": "Panel",
    "nav.patients": "Pacientes",
    "nav.resources": "Recursos",
    "nav.wearable": "Wearable",
    "nav.fairness": "Sesgo y Equidad",
    "nav.manage": "Gestión",
    "nav.language": "Idioma",
    "sidebar.brand": "Triaje Inteligente de Pacientes",
    "sidebar.engine": "Motor de IA",
    "sidebar.engineDesc": "Clasificador XGBoost · Explicador SHAP · Simulación de Gemelo Digital",

    "dash.title": "Panel de Triaje",
    "dash.subtitle": "Vista en tiempo real del triaje de pacientes y recursos hospitalarios",
    "dash.refresh": "Actualizar",
    "dash.totalPatients": "Total de Pacientes",
    "dash.criticalAlerts": "Alertas Críticas",
    "dash.avgConfidence": "Confianza Media",
    "dash.deptsActive": "Departamentos Activos",
    "dash.riskDist": "Distribución de Riesgo",
    "dash.deptChart": "Pacientes por Departamento",
    "dash.activity": "Actividad de Triaje 24 Horas",
    "dash.vitals": "Tendencia de Signos Vitales",
    "dash.aiModel": "Rendimiento del Modelo IA",
    "dash.xgb": "Métricas de Clasificación XGBoost",
    "dash.prodReady": "Listo para Producción",
    "dash.accuracy": "Precisión General",
    "dash.features": "Características de Entrada",
    "dash.trainSamples": "Muestras de Entrenamiento",
    "dash.testSamples": "Muestras de Prueba",
    "dash.confMatrix": "Matriz de Confusión",
    "dash.recentTriage": "Resultados Recientes de Triaje",
    "dash.noPatients": "No se han triado pacientes aún.",
    "dash.goTriage": "Nuevo Triaje",

    "triage.title": "Nuevo Triaje de Paciente",
    "triage.subtitle": "Ingrese signos vitales y síntomas para evaluación de riesgo con IA",
    "triage.patientDetails": "Datos del Paciente",
    "triage.fullName": "Nombre Completo",
    "triage.age": "Edad",
    "triage.gender": "Género",
    "triage.vitals": "Signos Vitales",
    "triage.symptoms": "Síntomas",
    "triage.voice": "Voz",
    "triage.listening": "Escuchando...",
    "triage.searchSymptoms": "Buscar síntomas...",
    "triage.conditions": "Condiciones Preexistentes",
    "triage.searchConditions": "Buscar condiciones...",
    "triage.insurance": "Seguro",
    "triage.provider": "Proveedor",
    "triage.responseHours": "Respuesta Esperada (horas)",
    "triage.submit": "Ejecutar Triaje IA",
    "triage.running": "Ejecutando Triaje...",
    "triage.uploadEHR": "Subir HCE",
    "triage.uploadDesc": "Suba un archivo PDF o texto de un HCE para autocompletar el formulario.",
    "triage.parseDoc": "Analizar Documento",
    "triage.presets": "Preajustes Rápidos",
    "triage.presetsDesc": "Cargue un escenario demo para probar el motor.",
    "triage.result": "Resultado del Triaje",
    "triage.print": "Imprimir",
    "triage.export": "Exportar JSON",
    "triage.riskLevel": "Nivel de Riesgo",
    "triage.confidence": "Confianza",
    "triage.department": "Departamento",
    "triage.detScore": "Puntuación de Deterioro",
    "triage.shapTitle": "Explicabilidad IA — Análisis de Factores SHAP",
    "triage.twinTitle": "Gemelo Digital — Trayectoria Proyectada",
    "triage.detAlerts": "Alertas de Deterioro",
    "triage.insRisk": "Riesgo de Espera del Seguro",
    "triage.resStatus": "Estado de Recursos Hospitalarios",
    "triage.dataWarnings": "Advertencias de Calidad de Datos",

    "patients.title": "Registros de Pacientes",
    "patients.search": "Buscar por nombre, ID o departamento...",
    "patients.noMatch": "Ningún paciente coincide con su búsqueda.",
    "patients.noTriaged": "No se han triado pacientes aún.",

    "resources.title": "Recursos Hospitalarios",
    "resources.subtitle": "Disponibilidad de camas, equipos y personal en tiempo real",
    "resources.beds": "Camas",
    "resources.ventilators": "Ventiladores",
    "resources.monitors": "Monitores",
    "resources.staff": "Personal en turno",

    "wearable.title": "Monitor de Signos Vitales Wearable",
    "wearable.subtitle": "Transmisión simulada de reloj inteligente — frecuencia cardíaca y SpO2 en tiempo real",
    "wearable.config": "Configuración de Transmisión",
    "wearable.start": "Iniciar Transmisión",
    "wearable.stop": "Detener Transmisión",
    "wearable.howItWorks": "Cómo Funciona",

    "fairness.title": "Análisis de Sesgo y Equidad",
    "fairness.subtitle": "Paridad demográfica, impacto desigual y probabilidades equalizadas",
    "fairness.pass": "El Modelo Pasa Todas las Verificaciones de Equidad",
    "fairness.fail": "Sesgo Potencial Detectado",

    "nav.drift": "Salud del Modelo",
    "drift.title": "Salud del Modelo ML",
    "drift.subtitle": "Monitorear la deriva de datos, rendimiento del modelo y recomendaciones de reentrenamiento",
    "drift.refresh": "Actualizar",
    "drift.retrain": "Reentrenar Modelo",
    "drift.driftDetected": "Deriva de Datos Detectada",
    "drift.modelHealthy": "El Modelo está Saludable",
    "drift.overallDrift": "Deriva General",
    "drift.featuresDrifted": "Características Derivadas",
    "drift.patientsAnalyzed": "Pacientes Analizados",
    "drift.modelVersion": "Versión del Modelo",
    "drift.accuracy": "Precisión",
    "drift.f1Score": "Puntuación F1",
    "drift.aucRoc": "AUC-ROC",
    "drift.featureDriftChart": "Deriva de Características (Estadísticas KS)",
    "drift.ksStatDesc": "Prueba de Kolmogorov-Smirnov comparando distribuciones de entrenamiento vs actuales",
    "drift.driftRadar": "Radar de Deriva",
    "drift.radarDesc": "Vista multidimensional de la intensidad de deriva por características",
    "drift.labelDistribution": "Cambio en Distribución de Etiquetas",
    "drift.featureDetails": "Detalles de Deriva por Característica",
    "drift.feature": "Característica",
    "drift.ksStat": "Est. KS",
    "drift.pValue": "Valor P",
    "drift.meanShift": "Cambio de Media",
    "drift.status": "Estado",
    "drift.modelTrainingInfo": "Información de Entrenamiento",
    "drift.modelName": "Nombre del Modelo",
    "drift.trainingDate": "Fecha de Entrenamiento",
    "drift.trainingSamples": "Muestras de Entrenamiento",
    "drift.lastRetrain": "Último Reentrenamiento",

    "common.risk": "Riesgo",
    "common.high": "Alto",
    "common.medium": "Medio",
    "common.low": "Bajo",
    "common.patient": "Paciente",
    "common.time": "Hora",
    "common.loading": "Cargando...",
    "common.language": "Idioma",
  },

  hi: {
    "nav.triage": "नया ट्राइएज",
    "nav.dashboard": "डैशबोर्ड",
    "nav.patients": "मरीज़",
    "nav.resources": "संसाधन",
    "nav.wearable": "वियरेबल",
    "nav.fairness": "निष्पक्षता विश्लेषण",
    "nav.manage": "प्रबंधन",
    "nav.language": "भाषा",
    "sidebar.brand": "स्मार्ट पेशेंट ट्राइएज",
    "sidebar.engine": "AI इंजन",
    "sidebar.engineDesc": "XGBoost क्लासीफायर · SHAP एक्सप्लेनर · डिजिटल ट्विन सिम",

    "dash.title": "ट्राइएज डैशबोर्ड",
    "dash.subtitle": "मरीज़ ट्राइएज और अस्पताल संसाधनों का रियल-टाइम अवलोकन",
    "dash.refresh": "रिफ्रेश",
    "dash.totalPatients": "कुल मरीज़",
    "dash.criticalAlerts": "गंभीर अलर्ट",
    "dash.avgConfidence": "औसत आत्मविश्वास",
    "dash.deptsActive": "सक्रिय विभाग",
    "dash.riskDist": "जोखिम वितरण",
    "dash.deptChart": "विभाग द्वारा मरीज़",
    "dash.activity": "24 घंटे ट्राइएज गतिविधि",
    "dash.vitals": "औसत रोगी महत्वपूर्ण संकेत",
    "dash.aiModel": "AI मॉडल प्रदर्शन",
    "dash.xgb": "XGBoost वर्गीकरण मेट्रिक्स",
    "dash.prodReady": "उत्पादन तैयार",
    "dash.accuracy": "समग्र सटीकता",
    "dash.features": "इनपुट विशेषताएं",
    "dash.trainSamples": "प्रशिक्षण नमूने",
    "dash.testSamples": "परीक्षण नमूने",
    "dash.confMatrix": "भ्रम मैट्रिक्स",
    "dash.recentTriage": "हाल के ट्राइएज परिणाम",
    "dash.noPatients": "अभी तक कोई मरीज़ ट्राइएज नहीं हुआ।",
    "dash.goTriage": "नया ट्राइएज",

    "triage.title": "नया मरीज़ ट्राइएज",
    "triage.subtitle": "AI-संचालित जोखिम मूल्यांकन के लिए मरीज़ के महत्वपूर्ण संकेत और लक्षण दर्ज करें",
    "triage.patientDetails": "मरीज़ विवरण",
    "triage.fullName": "पूरा नाम",
    "triage.age": "आयु",
    "triage.gender": "लिंग",
    "triage.vitals": "महत्वपूर्ण संकेत",
    "triage.symptoms": "लक्षण",
    "triage.voice": "आवाज़",
    "triage.listening": "सुन रहे हैं...",
    "triage.searchSymptoms": "लक्षण खोजें...",
    "triage.conditions": "पूर्व स्थितियाँ",
    "triage.searchConditions": "स्थितियाँ खोजें...",
    "triage.insurance": "बीमा",
    "triage.provider": "प्रदाता",
    "triage.responseHours": "अपेक्षित प्रतिक्रिया (घंटे)",
    "triage.submit": "AI ट्राइएज चलाएं",
    "triage.running": "ट्राइएज चल रहा है...",
    "triage.uploadEHR": "EHR अपलोड करें",
    "triage.uploadDesc": "फॉर्म ऑटो-फिल करने के लिए EHR से PDF या टेक्स्ट फ़ाइल अपलोड करें।",
    "triage.parseDoc": "दस्तावेज़ विश्लेषण",
    "triage.presets": "त्वरित प्रीसेट",
    "triage.presetsDesc": "इंजन का परीक्षण करने के लिए डेमो परिदृश्य लोड करें।",
    "triage.result": "ट्राइएज परिणाम",
    "triage.print": "प्रिंट",
    "triage.export": "JSON निर्यात",
    "triage.riskLevel": "जोखिम स्तर",
    "triage.confidence": "आत्मविश्वास",
    "triage.department": "विभाग",
    "triage.detScore": "बिगड़ने का स्कोर",
    "triage.shapTitle": "AI व्याख्या — SHAP कारक विश्लेषण",
    "triage.twinTitle": "डिजिटल ट्विन — अनुमानित गति",
    "triage.detAlerts": "बिगड़ने की चेतावनी",
    "triage.insRisk": "बीमा प्रतीक्षा-समय जोखिम",
    "triage.resStatus": "अस्पताल संसाधन स्थिति",
    "triage.dataWarnings": "डेटा गुणवत्ता चेतावनियाँ",

    "patients.title": "मरीज़ रिकॉर्ड",
    "patients.search": "नाम, ID या विभाग से खोजें...",
    "patients.noMatch": "आपकी खोज से कोई मरीज़ मेल नहीं खाता।",
    "patients.noTriaged": "अभी तक कोई मरीज़ ट्राइएज नहीं हुआ।",

    "resources.title": "अस्पताल संसाधन",
    "resources.subtitle": "बिस्तर, उपकरण और कर्मचारियों की रियल-टाइम उपलब्धता",
    "resources.beds": "बिस्तर",
    "resources.ventilators": "वेंटिलेटर",
    "resources.monitors": "मॉनिटर",
    "resources.staff": "ड्यूटी पर कर्मचारी",

    "wearable.title": "वियरेबल विटल्स मॉनिटर",
    "wearable.subtitle": "सिम्युलेटेड स्मार्टवॉच स्ट्रीम — WebSocket के माध्यम से रियल-टाइम",
    "wearable.config": "स्ट्रीम कॉन्फ़िगरेशन",
    "wearable.start": "स्ट्रीम शुरू करें",
    "wearable.stop": "स्ट्रीम रोकें",
    "wearable.howItWorks": "यह कैसे काम करता है",

    "fairness.title": "पूर्वाग्रह और निष्पक्षता विश्लेषण",
    "fairness.subtitle": "जनसांख्यिकीय समानता, असमान प्रभाव और समान अवसर",
    "fairness.pass": "मॉडल सभी निष्पक्षता जांच पास करता है",
    "fairness.fail": "संभावित पूर्वाग्रह का पता चला",

    "nav.drift": "मॉडल स्वास्थ्य",
    "drift.title": "ML मॉडल स्वास्थ्य",
    "drift.subtitle": "डेटा ड्रिफ्ट, मॉडल प्रदर्शन और पुनः प्रशिक्षण अनुशंसाओं की निगरानी करें",
    "drift.refresh": "रीफ्रेश",
    "drift.retrain": "मॉडल पुनः प्रशिक्षित करें",
    "drift.driftDetected": "डेटा ड्रिफ्ट का पता चला",
    "drift.modelHealthy": "मॉडल स्वस्थ है",
    "drift.overallDrift": "समग्र ड्रिफ्ट",
    "drift.featuresDrifted": "फीचर ड्रिफ्ट",
    "drift.patientsAnalyzed": "विश्लेषित मरीज़",
    "drift.modelVersion": "मॉडल संस्करण",
    "drift.accuracy": "सटीकता",
    "drift.f1Score": "F1 स्कोर",
    "drift.aucRoc": "AUC-ROC",
    "drift.featureDriftChart": "फीचर ड्रिफ्ट (KS सांख्यिकी)",
    "drift.ksStatDesc": "प्रशिक्षण बनाम वर्तमान वितरण की तुलना करने वाला KS परीक्षण",
    "drift.driftRadar": "ड्रिफ्ट रडार",
    "drift.radarDesc": "फीचर-स्तर ड्रिफ्ट तीव्रता का बहुआयामी दृश्य",
    "drift.labelDistribution": "लेबल वितरण बदलाव",
    "drift.featureDetails": "फीचर ड्रिफ्ट विवरण",
    "drift.feature": "फीचर",
    "drift.ksStat": "KS सांख्यिकी",
    "drift.pValue": "P-मान",
    "drift.meanShift": "माध्य बदलाव",
    "drift.status": "स्थिति",
    "drift.modelTrainingInfo": "मॉडल प्रशिक्षण जानकारी",
    "drift.modelName": "मॉडल का नाम",
    "drift.trainingDate": "प्रशिक्षण तिथि",
    "drift.trainingSamples": "प्रशिक्षण नमूने",
    "drift.lastRetrain": "अंतिम पुनः प्रशिक्षण",

    "common.risk": "जोखिम",
    "common.high": "उच्च",
    "common.medium": "मध्यम",
    "common.low": "कम",
    "common.patient": "मरीज़",
    "common.time": "समय",
    "common.loading": "लोड हो रहा है...",
    "common.language": "भाषा",
  },

  ta: {
    "nav.triage": "புதிய ட்ரையாஜ்",
    "nav.dashboard": "டாஷ்போர்டு",
    "nav.patients": "நோயாளிகள்",
    "nav.resources": "வளங்கள்",
    "nav.wearable": "வியரபிள்",
    "nav.fairness": "சமநிலை பகுப்பாய்வு",
    "nav.manage": "நிர்வாகம்",
    "nav.language": "மொழி",
    "sidebar.brand": "ஸ்மார்ட் நோயாளி ட்ரையாஜ்",
    "sidebar.engine": "AI இயந்திரம்",
    "sidebar.engineDesc": "XGBoost · SHAP விளக்கம் · டிஜிட்டல் ட்வின் சிமுலேஷன்",

    "dash.title": "ட்ரையாஜ் டாஷ்போர்டு",
    "dash.subtitle": "நோயாளி ட்ரையாஜ் மற்றும் மருத்துவமனை வளங்களின் நிகழ்நேர கண்ணோட்டம்",
    "dash.refresh": "புதுப்பி",
    "dash.totalPatients": "மொத்த நோயாளிகள்",
    "dash.criticalAlerts": "அவசர எச்சரிக்கைகள்",
    "dash.avgConfidence": "சராசரி நம்பிக்கை",
    "dash.deptsActive": "செயலில் உள்ள துறைகள்",
    "dash.riskDist": "ஆபத்து விநியோகம்",
    "dash.deptChart": "துறை வாரியாக நோயாளிகள்",
    "dash.activity": "24 மணி நேர செயல்பாடு",
    "dash.vitals": "சராசரி உயிர்க்குறிகள் போக்கு",
    "dash.aiModel": "AI மாதிரி செயல்திறன்",
    "dash.xgb": "XGBoost வகைப்பாடு மெட்ரிக்ஸ்",
    "dash.prodReady": "உற்பத்திக்கு தயார்",
    "dash.accuracy": "ஒட்டுமொத்த துல்லியம்",
    "dash.features": "உள்ளீட்டு அம்சங்கள்",
    "dash.trainSamples": "பயிற்சி மாதிரிகள்",
    "dash.testSamples": "சோதனை மாதிரிகள்",
    "dash.confMatrix": "குழப்ப மேட்ரிக்ஸ்",
    "dash.recentTriage": "சமீபத்திய முடிவுகள்",
    "dash.noPatients": "இதுவரை நோயாளிகள் ட்ரையாஜ் செய்யப்படவில்லை.",
    "dash.goTriage": "புதிய ட்ரையாஜ்",

    "triage.title": "புதிய நோயாளி ட்ரையாஜ்",
    "triage.subtitle": "AI-இயக்கப்படும் ஆபத்து மதிப்பீட்டிற்கு நோயாளியின் உயிர்க்குறிகள் மற்றும் அறிகுறிகளை உள்ளிடவும்",
    "triage.patientDetails": "நோயாளி விவரங்கள்",
    "triage.fullName": "முழு பெயர்",
    "triage.age": "வயது",
    "triage.gender": "பாலினம்",
    "triage.vitals": "உயிர்க்குறிகள்",
    "triage.symptoms": "அறிகுறிகள்",
    "triage.voice": "குரல்",
    "triage.listening": "கேட்கிறது...",
    "triage.searchSymptoms": "அறிகுறிகளைத் தேடு...",
    "triage.conditions": "முன்னிருக்கும் நிலைகள்",
    "triage.searchConditions": "நிலைகளைத் தேடு...",
    "triage.insurance": "காப்பீடு",
    "triage.provider": "வழங்குநர்",
    "triage.responseHours": "எதிர்பார்க்கப்படும் பதில் (மணிநேரம்)",
    "triage.submit": "AI ட்ரையாஜ் இயக்கு",
    "triage.running": "ட்ரையாஜ் இயங்குகிறது...",
    "triage.uploadEHR": "EHR பதிவேற்றம்",
    "triage.uploadDesc": "படிவத்தை தானாக நிரப்ப PDF அல்லது உரை கோப்பை பதிவேற்றவும்.",
    "triage.parseDoc": "ஆவணம் பகுப்பாய்வு",
    "triage.presets": "விரைவு முன்னமைவுகள்",
    "triage.presetsDesc": "இயந்திரத்தை சோதிக்க டெமோ காட்சியை ஏற்றவும்.",
    "triage.result": "ட்ரையாஜ் முடிவு",
    "triage.print": "அச்சிடு",
    "triage.export": "JSON ஏற்றுமதி",
    "triage.riskLevel": "ஆபத்து நிலை",
    "triage.confidence": "நம்பிக்கை",
    "triage.department": "துறை",
    "triage.detScore": "சிதைவு மதிப்பெண்",
    "triage.shapTitle": "AI விளக்கம் — SHAP காரணி பகுப்பாய்வு",
    "triage.twinTitle": "டிஜிட்டல் ட்வின் — கணிக்கப்பட்ட பாதை",
    "triage.detAlerts": "சிதைவு எச்சரிக்கைகள்",
    "triage.insRisk": "காப்பீடு காத்திருப்பு ஆபத்து",
    "triage.resStatus": "மருத்துவமனை வள நிலை",
    "triage.dataWarnings": "தரவு தர எச்சரிக்கைகள்",

    "patients.title": "நோயாளி பதிவுகள்",
    "patients.search": "பெயர், ID அல்லது துறையால் தேடு...",
    "patients.noMatch": "உங்கள் தேடலுடன் பொருந்தும் நோயாளிகள் இல்லை.",
    "patients.noTriaged": "இதுவரை நோயாளிகள் ட்ரையாஜ் செய்யப்படவில்லை.",

    "resources.title": "மருத்துவமனை வளங்கள்",
    "resources.subtitle": "படுக்கை, உபகரணங்கள் மற்றும் ஊழியர்களின் நிகழ்நேர கிடைக்கும் திறன்",
    "resources.beds": "படுக்கைகள்",
    "resources.ventilators": "வென்டிலேட்டர்கள்",
    "resources.monitors": "மானிட்டர்கள்",
    "resources.staff": "பணியில் உள்ள ஊழியர்கள்",

    "wearable.title": "வியரபிள் உயிர்க்குறி கண்காணிப்பு",
    "wearable.subtitle": "WebSocket வழியாக நிகழ்நேர நெஞ்சடிப்பு மற்றும் SpO2 ஸ்ட்ரீம்",
    "wearable.config": "ஸ்ட்ரீம் அமைப்பு",
    "wearable.start": "ஸ்ட்ரீம் தொடங்கு",
    "wearable.stop": "ஸ்ட்ரீம் நிறுத்து",
    "wearable.howItWorks": "இது எவ்வாறு செயல்படுகிறது",

    "fairness.title": "சமநிலை மற்றும் நியாயம் பகுப்பாய்வு",
    "fairness.subtitle": "மக்கள்தொகை சமநிலை, வேறுபட்ட தாக்கம் மற்றும் சம வாய்ப்புகள்",
    "fairness.pass": "மாதிரி அனைத்து சமநிலை சோதனைகளிலும் தேர்ச்சி",
    "fairness.fail": "சாத்தியமான சார்பு கண்டறியப்பட்டது",

    "nav.drift": "மாதிரி நிலை",
    "drift.title": "ML மாதிரி நிலை",
    "drift.subtitle": "தரவு நகர்வு, மாதிரி செயல்திறன் மற்றும் மறுபயிற்சி பரிந்துரைகளை கண்காணிக்கவும்",
    "drift.refresh": "புதுப்பிக்கவும்",
    "drift.retrain": "மாதிரியை மறுபயிற்சி செய்",
    "drift.driftDetected": "தரவு நகர்வு கண்டறியப்பட்டது",
    "drift.modelHealthy": "மாதிரி ஆரோக்கியமானது",
    "drift.overallDrift": "ஒட்டுமொத்த நகர்வு",
    "drift.featuresDrifted": "அம்சங்கள் நகர்ந்தன",
    "drift.patientsAnalyzed": "பகுப்பாய்வு செய்யப்பட்ட நோயாளிகள்",
    "drift.modelVersion": "மாதிரி பதிப்பு",
    "drift.accuracy": "துல்லியம்",
    "drift.f1Score": "F1 மதிப்பெண்",
    "drift.aucRoc": "AUC-ROC",
    "drift.featureDriftChart": "அம்ச நகர்வு (KS புள்ளிவிவரங்கள்)",
    "drift.ksStatDesc": "பயிற்சி மற்றும் தற்போதைய விநியோகங்களை ஒப்பிடும் KS சோதனை",
    "drift.driftRadar": "நகர்வு ரேடார்",
    "drift.radarDesc": "அம்ச-நிலை நகர்வு தீவிரத்தின் பல பரிமாண காட்சி",
    "drift.labelDistribution": "லேபிள் விநியோக மாற்றம்",
    "drift.featureDetails": "அம்ச நகர்வு விவரங்கள்",
    "drift.feature": "அம்சம்",
    "drift.ksStat": "KS புள்ளி",
    "drift.pValue": "P-மதிப்பு",
    "drift.meanShift": "சராசரி மாற்றம்",
    "drift.status": "நிலை",
    "drift.modelTrainingInfo": "மாதிரி பயிற்சி தகவல்",
    "drift.modelName": "மாதிரி பெயர்",
    "drift.trainingDate": "பயிற்சி தேதி",
    "drift.trainingSamples": "பயிற்சி மாதிரிகள்",
    "drift.lastRetrain": "கடைசி மறுபயிற்சி",

    "common.risk": "ஆபத்து",
    "common.high": "உயர்",
    "common.medium": "நடுத்தர",
    "common.low": "குறைவு",
    "common.patient": "நோயாளி",
    "common.time": "நேரம்",
    "common.loading": "ஏற்றுகிறது...",
    "common.language": "மொழி",
  },
};

/* ─────────── Context ─────────── */

interface I18nCtx {
  lang: Lang;
  setLang: (l: Lang) => void;
  t: (key: string) => string;
}

const I18nContext = createContext<I18nCtx>({
  lang: "en",
  setLang: () => {},
  t: (k) => k,
});

export function I18nProvider({ children }: { children: ReactNode }) {
  const [lang, setLang] = useState<Lang>("en");

  const t = useCallback(
    (key: string) => translations[lang]?.[key] ?? translations.en[key] ?? key,
    [lang]
  );

  return (
    <I18nContext.Provider value={{ lang, setLang, t }}>
      {children}
    </I18nContext.Provider>
  );
}

export function useI18n() {
  return useContext(I18nContext);
}
